!function(e){function t(t){for(var a,n,o=t[0],i=t[1],l=0,s=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&s.push(r[n][0]),r[n]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);s.length;)s.shift()()}var a={},r={0:0};var n={};var o={3:function(){return{"./index_bg.js":{__wbindgen_json_parse:function(e,t){return a[2].exports.d(e,t)},__wbindgen_json_serialize:function(e,t){return a[2].exports.e(e,t)},__wbindgen_object_drop_ref:function(e){return a[2].exports.f(e)},__wbg_new_59cb74e423758ede:function(){return a[2].exports.b()},__wbg_stack_558ba5917b466edd:function(e,t){return a[2].exports.c(e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return a[2].exports.a(e,t)},__wbindgen_throw:function(e,t){return a[2].exports.g(e,t)}}}}};function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var l=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=l);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+({}[e]||e)+".js"}(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}r[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return({1:[3]}[e]||[]).forEach((function(e){var a=n[e];if(a)t.push(a);else{var r,l=o[e](),s=fetch(i.p+""+{3:"6f75abec48ea664e0e21"}[e]+".module.wasm");if(l instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)r=Promise.all([WebAssembly.compileStreaming(s),l]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)r=WebAssembly.instantiateStreaming(s,l);else{r=s.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,l)}))}t.push(n[e]=r.then((function(t){return i.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e},i.w={};var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i(i.s=0)}([function(e,t,a){let r=document.getElementById("canvas"),n=r.getContext("2d"),o=document.createElement("canvas");o.width=r.width,o.height=r.height,r.width=663,r.height=517;let i=document.createElement("canvas"),l=i.getContext("2d"),s=2034,c=2035,u=o.getContext("2d");const d=[[234,491],[184,304],[127,263],[232,303],[217,262],[262,287],[305,262],[255,222],[153,230],[310,189],[388,501],[360,255],[503,287],[431,392],[646,262],[350,137],[291,313],[388,47],[342,65],[274,80],[212,88],[132,146]].map(e=>[Math.floor(e[0]/2),Math.floor(e[1]/2)]);function g(e){let t=new Image;return t.src=e,new Promise((e,a)=>{t.onload=function(){i.width=this.width,i.height=this.height,l.drawImage(this,0,0),e({img:t,rgb:l.getImageData(0,0,this.width,this.height).data})}})}function h(e,t){let a,r=!1;return function(){let n;if(r)n=a,r=!1;else{let e,t,o;do{e=2*Math.random()-1,t=2*Math.random()-1,o=e*e+t*t}while(o>=1);o=Math.sqrt(-2*Math.log(o)/o),n=e*o,a=t*o,r=!0}let o=e+t*n;return o>0?o:-o}}h(.51,.2),h(.6,.2);let m=["2228AprilMay","2228AugOct","2228JuneJuly","2835AprilMay","2835AugOct","2835JuneJuly"],p=["April","May","June","July","August","September","October"];(async()=>{let e,t,r=await a.e(1).then(a.bind(null,1)),i={},l=parseInt(document.getElementById("release-year").value),h=parseFloat(document.getElementById("new-product-quality").value),y=parseInt(document.getElementById("informational-environment-reliability").value)/10,b=parseInt(document.getElementById("provider-trust").value)/10,f=parseFloat(document.getElementById("prop-he").value),_=parseFloat(document.getElementById("prop-ea").value),v=1,I=!1,E=[],w={},M=!1,B=1,A=11,x=2021,T=0,C={},k={};function P(){let e={},t={},a=[];for(let e=0;e<=100;e++)a[e]=[];for(let t=1;t<=29;t++)for(let a=0;a<B;a++)for(let r=2022;r<=2035;r++)e[r]||(e[r]={}),e[r][t]||(e[r][t]=0),e[r][t]+=C[a][r][t];for(let e=0;e<B;e++)for(let a=2022;a<=2035;a++)t[a]||(t[a]={adoptionRatio:0,averageCertainty:0,averageInfEnv:0,averageUtility:0,averageInTrial:0}),t[a].adoptionRatio+=k[e][a].adoptionRatio,t[a].averageCertainty+=k[e][a].averageCertainty,t[a].averageInfEnv+=k[e][a].averageInfEnv,t[a].averageUtility+=k[e][a].averageUtility,t[a].averageInTrial+=k[e][a].averageInTrial;for(let e=2022;e<=2035;e++)t[e]||(t[e]={}),t[e].adoptionRatio/=B,t[e].averageCertainty/=B,t[e].averageInfEnv/=B,t[e].averageUtility/=B,t[e].averageInTrial/=B;a[0][0]="Release year",a[1][0]=l,a[0][1]="Informational Environment Reliability",a[1][1]=y,a[0][2]="Provider trust",a[1][2]=b,a[0][3]="New product quality",a[1][3]=h,a[0][4]="Percentage highly experienced",a[1][4]=f,a[0][5]="Percentage early adopters",a[1][5]=_,a[0][6]="Increasing product utility",a[1][6]=M?"yes":"no",a[0][7]="Trial length",a[1][7]=v,a[0][8]="High sea ice?",a[1][8]=I?"yes":"no";for(let e=0;e<14;e++)a[2][e+1]=e+2022;for(let t=1;t<=29;t++){a[t+2][0]="Route "+t;for(let r=2022;r<=2035;r++){e[r][t]/=B;let n=r-2021,o=e[r][t];a[t+2][n]=isNaN(o)?0:o}}a[2][20]="Average Certainty",a[2][21]="Adoption Ratio",a[2][22]="Average Informational Environment Reliance",a[2][23]="Average Utility",a[2][24]="In-Trial Ratio";for(let e=2022;e<=2035;e++)a[e-2021+2][19]=e,a[e-2021+2][20]=t[e].averageCertainty,a[e-2021+2][21]=t[e].adoptionRatio,a[e-2021+2][22]=t[e].averageInfEnv,a[e-2021+2][23]=t[e].averageUtility,a[e-2021+2][24]=t[e].averageInTrial;a[19][18]="Simulation";for(let e=0;e<B;e++){let t=13*e+20;a[t]||(a[t]=[]),a[t][25]=(w[e]||[]).join(";");for(let t=2022;t<=2035;t++){let r=13*e+20+(t-2022);a[r]||(a[r]=[]),a[r][18]=e,a[r][19]=t,a[r][20]=k[e][t].averageCertainty,a[r][21]=k[e][t].adoptionRatio,a[r][22]=k[e][t].averageCertainty,a[r][23]=k[e][t].averageUtility,a[r][24]=k[e][t].averageInTrial}}let r="";for(let e=0;e<a.length;e++){for(let t=0;t<=40;t++)r+=(void 0===a[e][t]||"number"==typeof a[e][t]&&isNaN(a[e][t])?"":a[e][t])+",";r+="\n"}window.open(encodeURI("data:text/csv;charset=utf-8,"+r))}let O={average_certainty:new Chart(document.getElementById("certainty-graph"),{type:"line",data:{labels:[],datasets:[{label:"Average Certainty",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]}]},options:{responsive:!1,scales:{y:{min:0,max:1}}}}),ship_count:new Chart(document.getElementById("ship-count"),{type:"line",data:{labels:[],datasets:[{label:"# of Ships",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]}]},options:{responsive:!1}}),adopters:new Chart(document.getElementById("adopters"),{type:"line",data:{labels:[],datasets:[{label:"% Adopters",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]},{label:"% Trialers",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]},{label:"% Non-Users",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]}]},options:{responsive:!1}}),utility_threshold:new Chart(document.getElementById("utility-threshold"),{type:"line",data:{labels:[],datasets:[{label:"Average Utility",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]}]},options:{responsive:!1,scales:{y:{min:0,max:1}}}}),reliance_on_informational_environment:new Chart(document.getElementById("informational-environment-reliance"),{type:"line",data:{labels:[],datasets:[{label:"Average reliance on informational environment",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"]}]},options:{responsive:!1,scales:{y:{min:0,max:1}}}})};function R(e,t){1!==t[t.length-1]&&r.add_ship_task(e,{task:"SetPosition",data:d[0]}),t.reverse().forEach(t=>{r.add_ship_task(e,{task:"GoTo",data:d[t-1]})})}const j={1:[[[1,2,4,1],1],[[1,2,4,2,1],2],[[1,2,4,6,4,2,1],3]],2:[[[1,2,4,6,8,6,2,1],4],[[1,2,4,6,8,6,4,2,1],5],[[1,2,5,2,1],6],[[1,4,6,8,6,4,2,1],7],[[1,4,6,8,9,3,1],8]],3:[[[1,2,4,6,7,6,2,1],9],[[1,2,4,6,7,6,4,2,1],10]],4:[[[1,2,4,6,10,7,17,6,4,2,1],11],[[1,2,4,6,7,10,9,3,1],12],[[1,2,4,6,7,12,7,6,5,2,1],13],[[1,2,4,6,8,10,7,6,4,2,1],14],[[1,2,4,6,8,16,10,6,4,2,1],15]],5:[[[1,2,4,6,20,18,19,6,4,2,1],16],[[1,2,4,6,20,6,2,1],17],[[1,4,6,20,6,4,2,1],18],[[1,4,6,21,9,3,1],19]],6:[[[1,2,4,6,19,7,17,6,4,2,1],20],[[1,2,4,6,20,19,7,6,4,2,1],21],[[1,2,4,6,20,6,4,2,1],22],[[1,2,4,6,7,19,22,1],23]],7:[[[1,2,4,6,7,14,13,11],24],[[1,2,4,6,8,14,11],25]],8:[[[1,2,4,6,20,14,11],26],[[1,2,4,6,21,14,1],27],[[1,2,4,6,7,12,13,11],28]],9:[[[1,2,4,6,7,12,15,13,14,11],29]]};function S(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function U(e,...t){let a=t[S(0,t.length)],r=j[Math.max(a-e,1)],n=S(0,r.length),o=r[n][0],i=r[n][1];return C[T]||(C[T]={}),C[T][x]||(C[T][x]={}),C[T][x][i]||(C[T][x][i]=0),C[T][x][i]++,o}for(let a=0;a<m.length;a++){let r=await g("images/"+m[a]+".png"),n=r.img,o=r.rgb;e=Math.floor(r.img.width/4),t=Math.floor(r.img.height/4);let l=new Uint8Array(e*t);for(let a=0;a<t;a++)for(let t=0;t<e;t++){let r=Math.floor(4*t),i=4*(Math.floor(4*a)*n.width+r),s=(o[i],o[i+1]),c=o[i+2];Math.abs(c-234)<2?l[a*e+t]=2:l[a*e+t]=76===s?0:2}r.cells=l,i[m[a]]=r}r.make_game(e,t);let $=i["2228AprilMay"].img;r.upload_grid(i["2228AprilMay"].cells);let q=!1,L=(e,t)=>{let a;if(x<=2028)switch(A){case 4:case 5:a="2228AprilMay";break;case 6:case 7:a="2228JuneJuly";break;case 8:case 9:case 10:a="2228AugOct"}else switch(A){case 4:case 5:a="2835AprilMay";break;case 6:case 7:a="2835JuneJuly";break;case 8:case 9:case 10:a="2835AugOct"}$=i[a].img,function(e,t,a){n.setTransform(.5,0,0,.5,0,0),n.drawImage(e,0,0),u.clearRect(0,0,u.canvas.width,u.canvas.height),a.forEach(e=>{u.beginPath();let t=e[1].hits.filter(e=>e.year>=s&&e.year<=c).length;if(0!=t){u.moveTo(4*e[0][0][0],4*e[0][0][1]);for(let t=1;t<e[0].length;t++)u.lineTo(4*e[0][t][0],4*e[0][t][1]);u.lineWidth=.4*Math.log(e[1]+1),u.strokeStyle=`rgba(${30*Math.log(t)}, ${2*Math.log(t)}, 0.2, ${50/Math.log(t)})`,u.stroke(),u.beginPath()}}),n.drawImage(o,0,0)}($,0,t)},H=()=>{let e=r.get_ship_states(),t=!1;for(let a=0;a<e.length;a++)if(e[a].tasks.length>0){t=!0;break}let a=!1;if(!t||B>1){if(a=!0,A++,A>10){let t;b<=.5?t=v:b>.5&&b<.9?t=Math.ceil(v/2):b>=.9&&(t=0),e=r.get_ship_states(),e.forEach(e=>{let a=x>=E[0]?.2:0;if("InTrial"===e.adoption_status.status&&x>=e.trial_year+t){let t;t=h>.5?.15*(e.reliance_on_informational_environment+a):.08*(e.reliance_on_informational_environment+a),t=Math.min(t,1),r.update_ship_certainty(e.id,t),r.update_ship_adoption_status(e.id,"Adopted")}}),e=r.get_ship_states();let a=0;if(e.forEach(e=>{e.experience_level>=.65&&a++}),A=4,2022===x&&I){const e=[2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035];E=[];for(let t=0;t<3;t++){let t=S(0,e.length);for(;E.includes(e[t]);)t=S(0,e.length);E.push(e[t])}E=E.sort((e,t)=>e-t),w[T]=E}if(e.forEach(e=>{let t=x>=E[0]?.2:0,a=e.reliance_on_informational_environment+t,n=(1-a)*e.experience_level+a*y;r.update_ship_certainty(e.id,n)}),e=r.get_ship_states(),x>=l){let t=0;e.forEach(e=>{"Adopted"===e.adoption_status.status&&t++});let a=t/e.length;e.forEach(e=>{let t=h>=e.quality_threshold?1:0;e.normative_influence*a+(1-e.normative_influence)*t>=e.utility_threshold&&"NonUser"===e.adoption_status.status&&(r.update_ship_trial_year(e.id,x),r.update_ship_adoption_status(e.id,"InTrial"))})}if(e=r.get_ship_states(),2029===x&&(M||I)&&e.forEach(e=>{let t=e.early_adopter?.6*Math.random():.8*Math.random();r.update_ship_utility_threshold(e.id,t)}),x++,r.update_year(x),2021!==x){if(1===B){let t=0;e.forEach(e=>{"Adopted"===e.adoption_status.status&&t++});let a=t/e.length,n=0,o=0;e.forEach(e=>{let t=h>=e.quality_threshold?1:0;n+=e.certainty,o+=e.normative_influence*a+(1-e.normative_influence)*t});let i=n/e.length,l=o/e.length;O.average_certainty.data.labels.push(x-1),O.average_certainty.data.datasets[0].data.push(i),O.average_certainty.update(),O.ship_count.data.labels.push(x-1),O.ship_count.data.datasets[0].data.push(e.length),O.ship_count.update(),O.adopters.data.labels.push(x-1),O.adopters.data.datasets[0].data.push(e.filter(e=>"Adopted"===e.adoption_status.status).length/e.length*100),O.adopters.data.datasets[1].data.push(e.filter(e=>"InTrial"===e.adoption_status.status).length/e.length*100),O.adopters.data.datasets[2].data.push(e.filter(e=>"NonUser"===e.adoption_status.status).length/e.length*100),O.adopters.update(),O.utility_threshold.data.labels.push(x-1),O.utility_threshold.data.datasets[0].data.push(l),O.utility_threshold.update(),e=r.get_ship_states();let s=0,c=x>=E[0]?.2:0;e.forEach(e=>s+=e.reliance_on_informational_environment+c);let u=s/e.length;O.reliance_on_informational_environment.data.labels.push(x-1),O.reliance_on_informational_environment.data.datasets[0].data.push(u),O.reliance_on_informational_environment.update()}e=r.get_ship_states();let t=0,a=0;x>2027&&console.log(e),e.forEach(e=>{"Adopted"===e.adoption_status.status&&t++,"InTrial"===e.adoption_status.status&&a++});let n=t/e.length,o=a/e.length,i=0,l=0,s=0;e.forEach(e=>{let t=h>=e.quality_threshold?1:0;i+=e.certainty,l+=e.normative_influence*n+(1-e.normative_influence)*t,s+=e.reliance_on_informational_environment});let c=s/e.length,u=i/e.length,d=i/e.length;k[T]||(k[T]={}),k[T][x-1]={averageInfEnv:c,averageCertainty:u,averageUtility:d,adoptionRatio:n,averageInTrial:o}}e=r.get_ship_states(),x>2035&&(1===B?(q=!1,P()):(T++,T===B?(q=!1,P()):(document.getElementById("simulation-number").innerHTML="Simulation: #"+(T+1),x=2021,A=4,r.clear_ships(),e=r.get_ship_states())))}e=r.get_ship_states(),document.getElementById("season").innerHTML=`${p[A-4]} ${x}`;let t=function(){switch(x){case 2022:case 2023:case 2024:case 2025:case 2026:case 2027:case 2028:switch(A){case 4:return.2;case 5:return.75;case 6:case 7:case 8:return 1;case 9:return.5;case 10:return.25}case 2029:case 2030:case 2031:case 2032:case 2033:case 2034:case 2035:switch(A){case 4:return.3;case 5:case 6:case 7:case 8:return 1;case 9:return.75;case 10:return.35}}}(),n=function(e){switch(e){case"realistic":switch(x){case 2022:return 42;case 2023:return 45;case 2024:return 48;case 2025:return 49;case 2026:return 52;case 2027:return 53;case 2028:return 55;case 2029:return 57;case 2030:return 60;case 2031:return 65;case 2032:case 2033:return 72;case 2034:return 73;case 2035:return 75}break;case"conservative":switch(x){case 2022:return 47;case 2023:case 2024:case 2025:case 2026:case 2027:return 49;case 2028:return 50;case 2029:return 51;case 2030:return 52;case 2031:return 53;case 2032:case 2033:return 54;case 2034:case 2035:return 55}break;case"optimistic":switch(x){case 2022:return 42;case 2023:return 45;case 2024:return 50;case 2025:return 63;case 2026:return 65;case 2027:return 80;case 2028:return 95;case 2029:case 2030:return 105;case 2031:case 2032:return 110;case 2033:return 115;case 2034:return 118;case 2035:return 120}}}(document.getElementById("realism").value),o=Math.floor(n*t),i=o-e.length;if(o>e.length){let t=[];for(let e=0;e<i;e++)t[e]=e/i<=_?.35*Math.random()+.65:.35*Math.random();t=t.sort((e,t)=>e-t);for(let a=0;a<i;a++){let n=a/i<=_,o=n?.8*Math.random():Math.random();x>=2029&&(o=n?.6*Math.random():.8*Math.random());let s,c=t[a],u=n?.51:.6;s=c>=.65?.3*Math.random()+.1:.4*Math.random()+.6;let g=x>=l,m=(1-s)*c+s*y,p=0;e.forEach(e=>{"Adopted"===e.adoption_status.status&&p++});let f=u*(p/e.length)+(1-u)*(h>=o?1:0),v="NonUser",I=e.map(e=>e.experience_level).concat(c).sort().reverse(),E=I.indexOf(c)/I.length;f>=o&&g&&E<_&&(v="InTrial"),r.add_ship(d[0][0],d[0][1],Math.random(),n,v,o,c,m,s,u,b,20*Math.random(),20*Math.random(),x)}e=r.get_ship_states()}let s=e.sort((e,t)=>e.certainty>t.certainty?1:e.certainty<t.certainty?-1:0),c=function(){let e=E.includes(x)?2:0;switch(x){case 2022:case 2023:case 2024:case 2025:case 2026:case 2027:case 2028:switch(A){case 4:case 5:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,2)):R(a,U(e,1))};case 6:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,2,4)):R(a,U(e,3))};case 7:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,7,8)):R(a,U(e,2,5,7))};case 8:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,7,8,9)):R(a,U(e,4,7,8))};case 9:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,4,5)):R(a,U(e,1))};case 10:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,3)):R(a,U(e,1))}}default:switch(A){case 4:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,5)):R(a,U(e,2))};case 5:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,5,7)):R(a,U(e,3))};case 6:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,7,8)):R(a,U(e,5,7))};case 7:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,7,8,9)):R(a,U(e,6,7,8))};case 8:return(t,a,r,n)=>{n>=r/2&&t.certainty,R(a,U(e,7,8,9))};case 9:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,5,8,9)):R(a,U(e,6,7))};case 10:return(t,a,r,n)=>{n>=r/2&&t.certainty>=.5?R(a,U(e,6)):R(a,U(e,1,6))}}}}(),u=e.filter(e=>e.experience_level>=.65).concat(e.filter(e=>e.experience_level<.65));for(let e=0;e<o;e++){let t=u[e];c(t,t.id,o,s.indexOf(t))}}let n=parseInt(document.getElementById("speed").value);if(1===B)for(let e=0;e<n;e++)r.tick_game();a&&1===B&&L(r.get_ship_states(),r.get_routes())};document.getElementById("play").onclick=()=>{q=!0;let e=()=>{q&&(H(),requestAnimationFrame(e))};e()},document.getElementById("record").onclick=()=>{q=!0,B=30;let e=()=>{q&&(H(),requestAnimationFrame(e))};e()};let J=e=>{l=parseInt(e.value),document.getElementById("release-year-label").innerHTML=`Release year (${e.value})`},N=e=>{let t=parseInt(e.value)/10;document.getElementById("informational-environment-reliability-label").innerHTML=`Informational environment reliability (${t})`,y=t},W=e=>{let t=parseInt(e.value)/10;document.getElementById("provider-trust-label").innerHTML=`Provider trust (${t})`,b=t},F=e=>{h=parseFloat(e.value),document.getElementById("new-product-quality-label").innerHTML=`New-product quality (${h})`},z=e=>{f=e.value,document.getElementById("prop-he-label").innerHTML=`Percentage highly experienced (${100*f}%)`},D=e=>{_=e.value,document.getElementById("prop-ea-label").innerHTML=`Percentage early adopters (${100*_}%)`},G=e=>{M=e.checked},K=e=>{s=parseInt(e.value),document.getElementById("min-year-label").innerHTML=`Min graph year (${s})`,L(r.get_ship_states(),r.get_routes())},Q=e=>{c=parseInt(e.value),document.getElementById("max-year-label").innerHTML=`Max graph year (${c})`,L(r.get_ship_states(),r.get_routes())},V=e=>{document.getElementById("trial-length-label").innerHTML=`Trial length (${e.value})`,v=parseInt(e.value)};document.getElementById("release-year").onchange=e=>J(e.target),document.getElementById("informational-environment-reliability").onchange=e=>N(e.target),document.getElementById("provider-trust").onchange=e=>W(e.target),document.getElementById("new-product-quality").onchange=e=>F(e.target),document.getElementById("prop-he").onchange=e=>z(e.target),document.getElementById("prop-ea").onchange=e=>D(e.target),document.getElementById("inc-prod").onchange=e=>G(e.target),document.getElementById("min-year-view").onchange=e=>K(e.target),document.getElementById("max-year-view").onchange=e=>Q(e.target),document.getElementById("trial-length").onchange=e=>V(e.target),document.getElementById("high-sea-ice").onchange=e=>{I=e.target.checked},I=document.getElementById("high-sea-ice").checked,J(document.getElementById("release-year")),N(document.getElementById("informational-environment-reliability")),W(document.getElementById("provider-trust")),F(document.getElementById("new-product-quality")),z(document.getElementById("prop-he")),D(document.getElementById("prop-ea")),G(document.getElementById("inc-prod")),K(document.getElementById("min-year-view")),Q(document.getElementById("max-year-view")),V(document.getElementById("trial-length"))})()}]);